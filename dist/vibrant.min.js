!function t(r,n,o){function e(s,a){if(!n[s]){if(!r[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[s]={exports:{}};r[s][0].call(c.exports,function(t){var n=r[s][1][t];return e(n?n:t)},c,c.exports,t,r,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)e(o[s]);return e}({1:[function(t,r,n){(function(t){!function(o){function e(t){throw new RangeError(T[t])}function i(t,r){for(var n=t.length,o=[];n--;)o[n]=r(t[n]);return o}function s(t,r){var n=t.split("@"),o="";n.length>1&&(o=n[0]+"@",t=n[1]),t=t.replace(O,".");var e=t.split("."),s=i(e,r).join(".");return o+s}function a(t){for(var r,n,o=[],e=0,i=t.length;i>e;)r=t.charCodeAt(e++),r>=55296&&56319>=r&&i>e?(n=t.charCodeAt(e++),56320==(64512&n)?o.push(((1023&r)<<10)+(1023&n)+65536):(o.push(r),e--)):o.push(r);return o}function u(t){return i(t,function(t){var r="";return t>65535&&(t-=65536,r+=E(t>>>10&1023|55296),t=56320|1023&t),r+=E(t)}).join("")}function h(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:C}function c(t,r){return t+22+75*(26>t)-((0!=r)<<5)}function p(t,r,n){var o=0;for(t=n?V(t/A):t>>1,t+=V(t/r);t>k*_>>1;o+=C)t=V(t/k);return V(o+(k+1)*t/(t+S))}function l(t){var r,n,o,i,s,a,c,l,f,g,v=[],m=t.length,d=0,y=L,b=I;for(n=t.lastIndexOf(q),0>n&&(n=0),o=0;n>o;++o)t.charCodeAt(o)>=128&&e("not-basic"),v.push(t.charCodeAt(o));for(i=n>0?n+1:0;m>i;){for(s=d,a=1,c=C;i>=m&&e("invalid-input"),l=h(t.charCodeAt(i++)),(l>=C||l>V((x-d)/a))&&e("overflow"),d+=l*a,f=b>=c?M:c>=b+_?_:c-b,!(f>l);c+=C)g=C-f,a>V(x/g)&&e("overflow"),a*=g;r=v.length+1,b=p(d-s,r,0==s),V(d/r)>x-y&&e("overflow"),y+=V(d/r),d%=r,v.splice(d++,0,y)}return u(v)}function f(t){var r,n,o,i,s,u,h,l,f,g,v,m,d,y,b,w=[];for(t=a(t),m=t.length,r=L,n=0,s=I,u=0;m>u;++u)v=t[u],128>v&&w.push(E(v));for(o=i=w.length,i&&w.push(q);m>o;){for(h=x,u=0;m>u;++u)v=t[u],v>=r&&h>v&&(h=v);for(d=o+1,h-r>V((x-n)/d)&&e("overflow"),n+=(h-r)*d,r=h,u=0;m>u;++u)if(v=t[u],r>v&&++n>x&&e("overflow"),v==r){for(l=n,f=C;g=s>=f?M:f>=s+_?_:f-s,!(g>l);f+=C)b=l-g,y=C-g,w.push(E(c(g+b%y,0))),l=V(b/y);w.push(E(c(l,0))),s=p(n,d,o==i),n=0,++o}++n,++r}return w.join("")}function g(t){return s(t,function(t){return z.test(t)?l(t.slice(4).toLowerCase()):t})}function v(t){return s(t,function(t){return D.test(t)?"xn--"+f(t):t})}var m="object"==typeof n&&n&&!n.nodeType&&n,d="object"==typeof r&&r&&!r.nodeType&&r,y="object"==typeof t&&t;y.global!==y&&y.window!==y&&y.self!==y||(o=y);var b,w,x=2147483647,C=36,M=1,_=26,S=38,A=700,I=72,L=128,q="-",z=/^xn--/,D=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=C-M,V=Math.floor,E=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:a,encode:u},decode:l,encode:f,toASCII:v,toUnicode:g},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(m&&d)if(r.exports==m)d.exports=b;else for(w in b)b.hasOwnProperty(w)&&(m[w]=b[w]);else o.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,r,n){"use strict";function o(t,r){return Object.prototype.hasOwnProperty.call(t,r)}r.exports=function(t,r,n,i){r=r||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(r);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var c=0;h>c;++c){var p,l,f,g,v=t[c].replace(a,"%20"),m=v.indexOf(n);m>=0?(p=v.substr(0,m),l=v.substr(m+1)):(p=v,l=""),f=decodeURIComponent(p),g=decodeURIComponent(l),o(s,f)?e(s[f])?s[f].push(g):s[f]=[s[f],g]:s[f]=g}return s};var e=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],3:[function(t,r,n){"use strict";function o(t,r){if(t.map)return t.map(r);for(var n=[],o=0;o<t.length;o++)n.push(r(t[o],o));return n}var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};r.exports=function(t,r,n,a){return r=r||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(e(s))+n;return i(t[s])?o(t[s],function(t){return a+encodeURIComponent(e(t))}).join(r):a+encodeURIComponent(e(t[s]))}).join(r):a?encodeURIComponent(e(a))+n+encodeURIComponent(e(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(n);return r}},{}],4:[function(t,r,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":2,"./encode":3}],5:[function(t,r,n){function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(t,r,n){if(t&&h(t)&&t instanceof o)return t;var e=new o;return e.parse(t,r,n),e}function i(t){return u(t)&&(t=e(t)),t instanceof o?t.format():o.prototype.format.call(t)}function s(t,r){return e(t,!1,!0).resolve(r)}function a(t,r){return t?e(t,!1,!0).resolveObject(r):r}function u(t){return"string"==typeof t}function h(t){return"object"==typeof t&&null!==t}function c(t){return null===t}function p(t){return null==t}var l=t("punycode");n.parse=e,n.resolve=s,n.resolveObject=a,n.format=i,n.Url=o;var f=/^([a-z0-9.+-]+:)/i,g=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(v),d=["'"].concat(m),y=["%","/","?",";","#"].concat(d),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,C=/^([a-z0-9A-Z_-]{0,63})(.*)$/,M={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=t("querystring");o.prototype.parse=function(t,r,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t;o=o.trim();var e=f.exec(o);if(e){e=e[0];var i=e.toLowerCase();this.protocol=i,o=o.substr(e.length)}if(n||e||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===o.substr(0,2);!s||e&&_[e]||(o=o.substr(2),this.slashes=!0)}if(!_[e]&&(s||e&&!S[e])){for(var a=-1,h=0;h<b.length;h++){var c=o.indexOf(b[h]);-1!==c&&(-1===a||a>c)&&(a=c)}var p,g;g=-1===a?o.lastIndexOf("@"):o.lastIndexOf("@",a),-1!==g&&(p=o.slice(0,g),o=o.slice(g+1),this.auth=decodeURIComponent(p)),a=-1;for(var h=0;h<y.length;h++){var c=o.indexOf(y[h]);-1!==c&&(-1===a||a>c)&&(a=c)}-1===a&&(a=o.length),this.host=o.slice(0,a),o=o.slice(a),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var m=this.hostname.split(/\./),h=0,I=m.length;I>h;h++){var L=m[h];if(L&&!L.match(x)){for(var q="",z=0,D=L.length;D>z;z++)q+=L.charCodeAt(z)>127?"x":L[z];if(!q.match(x)){var O=m.slice(0,h),T=m.slice(h+1),k=L.match(C);k&&(O.push(k[1]),T.unshift(k[2])),T.length&&(o="/"+T.join(".")+o),this.hostname=O.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var V=this.hostname.split("."),E=[],h=0;h<V.length;++h){var j=V[h];E.push(j.match(/[^A-Za-z0-9_-]/)?"xn--"+l.encode(j):j)}this.hostname=E.join(".")}var R=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+R,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!M[i])for(var h=0,I=d.length;I>h;h++){var U=d[h],B=encodeURIComponent(U);B===U&&(B=escape(U)),o=o.split(U).join(B)}var H=o.indexOf("#");-1!==H&&(this.hash=o.substr(H),o=o.slice(0,H));var N=o.indexOf("?");if(-1!==N?(this.search=o.substr(N),this.query=o.substr(N+1),r&&(this.query=A.parse(this.query)),o=o.slice(0,N)):r&&(this.search="",this.query={}),o&&(this.pathname=o),S[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var R=this.pathname||"",j=this.search||"";this.path=R+j}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=this.protocol||"",n=this.pathname||"",o=this.hash||"",e=!1,i="";this.host?e=t+this.host:this.hostname&&(e=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&h(this.query)&&Object.keys(this.query).length&&(i=A.stringify(this.query));var s=this.search||i&&"?"+i||"";return r&&":"!==r.substr(-1)&&(r+=":"),this.slashes||(!r||S[r])&&e!==!1?(e="//"+(e||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):e||(e=""),o&&"#"!==o.charAt(0)&&(o="#"+o),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),r+e+n+s+o},o.prototype.resolve=function(t){return this.resolveObject(e(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(u(t)){var r=new o;r.parse(t,!1,!0),t=r}var n=new o;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(r){"protocol"!==r&&(n[r]=t[r])}),S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol])return Object.keys(t).forEach(function(r){n[r]=t[r]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||_[t.protocol])n.pathname=t.pathname;else{for(var e=(t.pathname||"").split("/");e.length&&!(t.host=e.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),n.pathname=e.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",s=n.search||"";n.path=i+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),h=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=h||a||n.host&&t.pathname,f=l,g=n.pathname&&n.pathname.split("/")||[],e=t.pathname&&t.pathname.split("/")||[],v=n.protocol&&!S[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===g[0]?g[0]=n.host:g.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===e[0]?e[0]=t.host:e.unshift(t.host)),t.host=null),l=l&&(""===e[0]||""===g[0])),h)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,g=e;else if(e.length)g||(g=[]),g.pop(),g=g.concat(e),n.search=t.search,n.query=t.query;else if(!p(t.search)){if(v){n.hostname=n.host=g.shift();var m=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return n.search=t.search,n.query=t.query,c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!g.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var d=g.slice(-1)[0],y=(n.host||t.host)&&("."===d||".."===d)||""===d,b=0,w=g.length;w>=0;w--)d=g[w],"."==d?g.splice(w,1):".."===d?(g.splice(w,1),b++):b&&(g.splice(w,1),b--);if(!l&&!f)for(;b--;b)g.unshift("..");!l||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),y&&"/"!==g.join("/").substr(-1)&&g.push("");var x=""===g[0]||g[0]&&"/"===g[0].charAt(0);if(v){n.hostname=n.host=x?"":g.length?g.shift():"";var m=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return l=l||n.host&&g.length,l&&!x&&g.unshift(""),g.length?n.pathname=g.join("/"):(n.pathname=null,n.path=null),c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,r=g.exec(t);r&&(r=r[0],":"!==r&&(this.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(this.hostname=t)}},{punycode:1,querystring:4}],6:[function(t,r,n){if(!o)var o={map:function(t,r){var n={};return r?t.map(function(t,o){return n.index=o,r.call(n,t)}):t.slice()},naturalOrder:function(t,r){return r>t?-1:t>r?1:0},sum:function(t,r){var n={};return t.reduce(r?function(t,o,e){return n.index=e,t+r.call(n,o)}:function(t,r){return t+r},0)},max:function(t,r){return Math.max.apply(null,r?o.map(t,r):t)}};var e=function(){function t(t,r,n){return(t<<2*h)+(r<<h)+n}function r(t){function r(){n.sort(t),o=!0}var n=[],o=!1;return{push:function(t){n.push(t),o=!1},peek:function(t){return o||r(),void 0===t&&(t=n.length-1),n[t]},pop:function(){return o||r(),n.pop()},size:function(){return n.length},map:function(t){return n.map(t)},debug:function(){return o||r(),n}}}function n(t,r,n,o,e,i,s){var a=this;a.r1=t,a.r2=r,a.g1=n,a.g2=o,a.b1=e,a.b2=i,a.histo=s}function e(){this.vboxes=new r(function(t,r){return o.naturalOrder(t.vbox.count()*t.vbox.volume(),r.vbox.count()*r.vbox.volume())})}function i(r){var n,o,e,i,s=1<<3*h,a=new Array(s);return r.forEach(function(r){o=r[0]>>c,e=r[1]>>c,i=r[2]>>c,n=t(o,e,i),a[n]=(a[n]||0)+1}),a}function s(t,r){var o,e,i,s=1e6,a=0,u=1e6,h=0,p=1e6,l=0;return t.forEach(function(t){o=t[0]>>c,e=t[1]>>c,i=t[2]>>c,s>o?s=o:o>a&&(a=o),u>e?u=e:e>h&&(h=e),p>i?p=i:i>l&&(l=i)}),new n(s,a,u,h,p,l,r)}function a(r,n){function e(t){var r,o,e,i,s,a=t+"1",u=t+"2",c=0;for(h=n[a];h<=n[u];h++)if(v[h]>g/2){for(e=n.copy(),i=n.copy(),r=h-n[a],o=n[u]-h,s=o>=r?Math.min(n[u]-1,~~(h+o/2)):Math.max(n[a],~~(h-1-r/2));!v[s];)s++;for(c=m[s];!c&&v[s-1];)c=m[--s];return e[u]=s,i[a]=e[u]+1,[e,i]}}if(n.count()){var i=n.r2-n.r1+1,s=n.g2-n.g1+1,a=n.b2-n.b1+1,u=o.max([i,s,a]);if(1==n.count())return[n.copy()];var h,c,p,l,f,g=0,v=[],m=[];if(u==i)for(h=n.r1;h<=n.r2;h++){for(l=0,c=n.g1;c<=n.g2;c++)for(p=n.b1;p<=n.b2;p++)f=t(h,c,p),l+=r[f]||0;g+=l,v[h]=g}else if(u==s)for(h=n.g1;h<=n.g2;h++){for(l=0,c=n.r1;c<=n.r2;c++)for(p=n.b1;p<=n.b2;p++)f=t(c,h,p),l+=r[f]||0;g+=l,v[h]=g}else for(h=n.b1;h<=n.b2;h++){for(l=0,c=n.r1;c<=n.r2;c++)for(p=n.g1;p<=n.g2;p++)f=t(c,p,h),l+=r[f]||0;g+=l,v[h]=g}return v.forEach(function(t,r){m[r]=g-t}),e(u==i?"r":u==s?"g":"b")}}function u(t,n){function u(t,r){for(var n,o=1,e=0;p>e;)if(n=t.pop(),n.count()){var i=a(h,n),s=i[0],u=i[1];if(!s)return;if(t.push(s),u&&(t.push(u),o++),o>=r)return;if(e++>p)return}else t.push(n),e++}if(!t.length||2>n||n>256)return!1;var h=i(t),c=0;h.forEach(function(){c++});var f=s(t,h),g=new r(function(t,r){return o.naturalOrder(t.count(),r.count())});g.push(f),u(g,l*n);for(var v=new r(function(t,r){return o.naturalOrder(t.count()*t.volume(),r.count()*r.volume())});g.size();)v.push(g.pop());u(v,n-v.size());for(var m=new e;v.size();)m.push(v.pop());return m}var h=5,c=8-h,p=1e3,l=.75;return n.prototype={volume:function(t){var r=this;return r._volume&&!t||(r._volume=(r.r2-r.r1+1)*(r.g2-r.g1+1)*(r.b2-r.b1+1)),r._volume},count:function(r){var n=this,o=n.histo;if(!n._count_set||r){var e,i,s,a=0;for(e=n.r1;e<=n.r2;e++)for(i=n.g1;i<=n.g2;i++)for(s=n.b1;s<=n.b2;s++)index=t(e,i,s),a+=o[index]||0;n._count=a,n._count_set=!0}return n._count},copy:function(){var t=this;return new n(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(r){var n=this,o=n.histo;if(!n._avg||r){var e,i,s,a,u,c=0,p=1<<8-h,l=0,f=0,g=0;for(i=n.r1;i<=n.r2;i++)for(s=n.g1;s<=n.g2;s++)for(a=n.b1;a<=n.b2;a++)u=t(i,s,a),e=o[u]||0,c+=e,l+=e*(i+.5)*p,f+=e*(s+.5)*p,g+=e*(a+.5)*p;c?n._avg=[~~(l/c),~~(f/c),~~(g/c)]:n._avg=[~~(p*(n.r1+n.r2+1)/2),~~(p*(n.g1+n.g2+1)/2),~~(p*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(t){var r=this,n=t[0]>>c;return gval=t[1]>>c,bval=t[2]>>c,n>=r.r1&&n<=r.r2&&gval>=r.g1&&gval<=r.g2&&bval>=r.b1&&bval<=r.b2}},e.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var r=this.vboxes,n=0;n<r.size();n++)if(r.peek(n).vbox.contains(t))return r.peek(n).color;return this.nearest(t)},nearest:function(t){for(var r,n,o,e=this.vboxes,i=0;i<e.size();i++)n=Math.sqrt(Math.pow(t[0]-e.peek(i).color[0],2)+Math.pow(t[1]-e.peek(i).color[1],2)+Math.pow(t[2]-e.peek(i).color[2],2)),(r>n||void 0===r)&&(r=n,o=e.peek(i).color);return o},forcebw:function(){var t=this.vboxes;t.sort(function(t,r){return o.naturalOrder(o.sum(t.color),o.sum(r.color))});var r=t[0].color;r[0]<5&&r[1]<5&&r[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,e=t[n].color;e[0]>251&&e[1]>251&&e[2]>251&&(t[n].color=[255,255,255])}},{quantize:u}}();r.exports=e.quantize},{}],7:[function(t,r,n){var o;o=t("./vibrant"),o.DefaultOpts.Image=t("./image/browser"),r.exports=o},{"./image/browser":13,"./vibrant":26}],8:[function(t,r,n){var o;window.Vibrant=o=t("./browser")},{"./browser":7}],9:[function(t,r,n){r.exports=function(t,r,n,o){return o>=125&&!(t>250&&r>250&&n>250)}},{}],10:[function(t,r,n){r.exports.Default=t("./default")},{"./default":9}],11:[function(t,r,n){var o,e,i,s,a,u=function(t,r){function n(){this.constructor=t}for(var o in r)h.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},h={}.hasOwnProperty,c=[].slice;s=t("../swatch"),a=t("../util"),i=t("./index"),e={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6,weightPopulation:1},r.exports=o=function(t){function r(t){this.opts=a.defaults(t,e),this.VibrantSwatch=null,this.LightVibrantSwatch=null,this.DarkVibrantSwatch=null,this.MutedSwatch=null,this.LightMutedSwatch=null,this.DarkMutedSwatch=null}return u(r,t),r.prototype.HighestPopulation=0,r.prototype.generate=function(t){return this.swatches=t,this.maxPopulation=this.findMaxPopulation,this.generateVarationColors(),this.generateEmptySwatches()},r.prototype.getVibrantSwatch=function(){return this.VibrantSwatch},r.prototype.getLightVibrantSwatch=function(){return this.LightVibrantSwatch},r.prototype.getDarkVibrantSwatch=function(){return this.DarkVibrantSwatch},r.prototype.getMutedSwatch=function(){return this.MutedSwatch},r.prototype.getLightMutedSwatch=function(){return this.LightMutedSwatch},r.prototype.getDarkMutedSwatch=function(){return this.DarkMutedSwatch},r.prototype.generateVarationColors=function(){return this.VibrantSwatch=this.findColorVariation(this.opts.targetNormalLuma,this.opts.minNormalLuma,this.opts.maxNormalLuma,this.opts.targetVibrantSaturation,this.opts.minVibrantSaturation,1),this.LightVibrantSwatch=this.findColorVariation(this.opts.targetLightLuma,this.opts.minLightLuma,1,this.opts.targetVibrantSaturation,this.opts.minVibrantSaturation,1),this.DarkVibrantSwatch=this.findColorVariation(this.opts.targetDarkLuma,0,this.opts.maxDarkLuma,this.opts.targetVibrantSaturation,this.opts.minVibrantSaturation,1),this.MutedSwatch=this.findColorVariation(this.opts.targetNormalLuma,this.opts.minNormalLuma,this.opts.maxNormalLuma,this.opts.targetMutesSaturation,0,this.opts.maxMutesSaturation),this.LightMutedSwatch=this.findColorVariation(this.opts.targetLightLuma,this.opts.minLightLuma,1,this.opts.targetMutesSaturation,0,this.opts.maxMutesSaturation),this.DarkMutedSwatch=this.findColorVariation(this.opts.targetDarkLuma,0,this.opts.maxDarkLuma,this.opts.targetMutesSaturation,0,this.opts.maxMutesSaturation)},r.prototype.generateEmptySwatches=function(){var t;return null===this.VibrantSwatch&&null!==this.DarkVibrantSwatch&&(t=this.DarkVibrantSwatch.getHsl(),t[2]=this.opts.targetNormalLuma,this.VibrantSwatch=new s(a.hslToRgb(t[0],t[1],t[2]),0)),null===this.DarkVibrantSwatch&&null!==this.VibrantSwatch?(t=this.VibrantSwatch.getHsl(),t[2]=this.opts.targetDarkLuma,this.DarkVibrantSwatch=new s(a.hslToRgb(t[0],t[1],t[2]),0)):void 0},r.prototype.findMaxPopulation=function(){var t,r,n,o,e;for(n=0,o=this.swatches,t=0,r=o.length;r>t;t++)e=o[t],n=Math.max(n,e.getPopulation());return n},r.prototype.findColorVariation=function(t,r,n,o,e,i){var s,a,u,h,c,p,l,f,g;for(h=null,c=0,p=this.swatches,s=0,a=p.length;a>s;s++)f=p[s],l=f.getHsl()[1],u=f.getHsl()[2],l>=e&&i>=l&&u>=r&&n>=u&&!this.isAlreadySelected(f)&&(g=this.createComparisonValue(l,o,u,t,f.getPopulation(),this.HighestPopulation),(null===h||g>c)&&(h=f,c=g));return h},r.prototype.createComparisonValue=function(t,r,n,o,e,i){return this.weightedMean(this.invertDiff(t,r),this.opts.weightSaturation,this.invertDiff(n,o),this.opts.weightLuma,e/i,this.opts.weightPopulation)},r.prototype.invertDiff=function(t,r){return 1-Math.abs(t-r)},r.prototype.weightedMean=function(){var t,r,n,o,e,i;for(e=1<=arguments.length?c.call(arguments,0):[],r=0,n=0,t=0;t<e.length;)o=e[t],i=e[t+1],r+=o*i,n+=i,t+=2;return r/n},r.prototype.isAlreadySelected=function(t){return this.VibrantSwatch===t||this.DarkVibrantSwatch===t||this.LightVibrantSwatch===t||this.MutedSwatch===t||this.DarkMutedSwatch===t||this.LightMutedSwatch===t},r}(i)},{"../swatch":24,"../util":25,"./index":12}],12:[function(t,r,n){var o;r.exports=o=function(){function t(){}return t.prototype.generate=function(t){},t.prototype.getVibrantSwatch=function(){},t.prototype.getLightVibrantSwatch=function(){},t.prototype.getDarkVibrantSwatch=function(){},t.prototype.getMutedSwatch=function(){},t.prototype.getLightMutedSwatch=function(){},t.prototype.getDarkMutedSwatch=function(){},t}(),r.exports.Default=t("./default")},{"./default":11}],13:[function(t,r,n){var o,e,i,s,a,u=function(t,r){function n(){this.constructor=t}for(var o in r)h.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},h={}.hasOwnProperty;e=t("./index"),i=t("url"),s=function(t){var r;return r=i.parse(t),null===r.protocol&&null===r.host&&null===r.port},a=function(t,r){var n,o;return n=i.parse(t),o=i.parse(r),n.protocol===o.protocol&&n.hostname===o.hostname&&n.port===o.port},r.exports=o=function(t){function r(t,r){this.img=document.createElement("img"),s(t)||a(window.location.href,t)||(this.img.crossOrigin="anonymous"),this.img.src=t,this.img.onload=function(t){return function(){return t._initCanvas(),"function"==typeof r?r(null,t):void 0}}(this),this.img.onerror=function(n){return function(n){var o;return o=new Error("Fail to load image: "+t),o.raw=n,"function"==typeof r?r(o):void 0}}(this)}return u(r,t),r.prototype._initCanvas=function(){return this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=this.img.width,this.height=this.canvas.height=this.img.height,this.context.drawImage(this.img,0,0,this.width,this.height)},r.prototype.clear=function(){return this.context.clearRect(0,0,this.width,this.height)},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.resize=function(t,r,n){return this.width=this.canvas.width=t,this.height=this.canvas.height=r,this.context.scale(n,n),this.context.drawImage(this.img,0,0)},r.prototype.update=function(t){return this.context.putImageData(t,0,0)},r.prototype.getPixelCount=function(){return this.width*this.height},r.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},r.prototype.removeCanvas=function(){return this.canvas.parentNode.removeChild(this.canvas)},r}(e)},{"./index":14,url:5}],14:[function(t,r,n){var o;r.exports=o=function(){function t(){}return t.prototype.clear=function(){},t.prototype.update=function(t){},t.prototype.getWidth=function(){},t.prototype.getHeight=function(){},t.prototype.scaleDown=function(t){var r,n,o,e;return e=this.getWidth(),r=this.getHeight(),o=1,null!=t.maxDimension?(n=Math.max(e,r),n>t.maxDimension&&(o=t.maxDimension/n)):o=1/t.quality,1>o?this.resize(e*o,r*o,o):void 0},t.prototype.resize=function(t,r,n){},t.prototype.getPixelCount=function(){},t.prototype.getImageData=function(){},t.prototype.removeCanvas=function(){},t}()},{}],15:[function(t,r,n){var o,e,i,s,a=function(t,r){function n(){this.constructor=t}for(var o in r)u.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},u={}.hasOwnProperty;i=t("../swatch"),e=t("./index"),s=t("quantize"),r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.initialize=function(t,r){var n,o,e,a,u,h,c,p,l;for(this.opts=r,p=t.length/4,o=[],h=0;p>h;)c=4*h,l=t[c+0],u=t[c+1],e=t[c+2],n=t[c+3],n>=125&&(l>250&&u>250&&e>250||o.push([l,u,e])),h+=this.opts.quality;return a=s(o,this.opts.colorCount),this.swatches=a.vboxes.map(function(t){return function(t){return new i(t.color,t.vbox.count())}}(this))},r.prototype.getQuantizedColors=function(){return this.swatches},r}(e)},{"../swatch":24,"./index":21,quantize:6}],16:[function(t,r,n){var o,e,i,s,a=function(t,r){function n(){this.constructor=t}for(var o in r)u.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},u={}.hasOwnProperty;s=t("../swatch"),i=t("./index"),o=t("./impl/color-cut"),r.exports=e=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.initialize=function(t,r){var n,e,i;return this.opts=r,n=new ArrayBuffer(t.length),e=new Uint8ClampedArray(n),i=new Uint32Array(n),e.set(t),this.quantizer=new o(i,this.opts)},r.prototype.getQuantizedColors=function(){return this.quantizer.getQuantizedColors()},r}(i)},{"../swatch":24,"./impl/color-cut":17,"./index":21}],17:[function(t,r,n){var o,e,i,s,a,u,h,c,p,l,f,g,v,m,d,y,b,w,x,C;l=t("../../swatch"),C=function(t,r,n){var o,e,i;return i=function(r,n){var o;return o=t[r],t[r]=t[n],t[n]=o},o=function(r,n,o){var e,s,a,u,h,c;for(e=n,c=t[r],i(r,o),h=s=a=n,u=o-1;u>=a?u>=s:s>=u;h=u>=a?++s:--s)t[h]>c&&(i(h,e),e++);return i(o,e),e},n>r?(e=r+Math.ceil((n-r)/2),e=o(e,r,n),C(t,r,e-1),C(t,e+1,n)):void 0},s=-3,i=-2,e=-1,c=5,h=(1<<c)-1,p={red:function(t){return t>>24},green:function(t){return t<<8>>24},blue:function(t){return t<<16>>24},alpha:function(t){return t<<24>>24}},o={red:function(t){return t<<24>>24},green:function(t){return t<<16>>24},blue:function(t){return t<<8>>24},alpha:function(t){return t>>24}},v=function(){var t,r,n;if(t=new ArrayBuffer(4),r=new Uint8Array(t),n=new Uint32Array(t),r[0]=161,r[1]=178,r[2]=195,r[3]=212,3569595041===n[0])return!0;if(2712847316===n[0])return!1;throw new Error("Failed to determin endianness")},a=v()?o:p,d=function(t,r,n){var o;return o=0,o=n>r?t<<n-r:t>>r-n,o&(1<<n)-1},m=function(t,r,n,o){var a,u,h,p,l,f,g,v;switch(r){case s:break;case i:for(u=h=l=n,f=o;f>=l?f>=h:h>=f;u=f>=l?++h:--h)a=t[u],t[u]=w(a)<<c+c|x(a)<<c|b(a);break;case e:for(u=p=g=n,v=o;v>=g?v>=p:p>=v;u=v>=g?++p:--p)a=t[u],t[u]=b(a)<<c+c|w(a)<<c|x(a)}},y=function(t){var r,n,o;return o=d(a.red(t),8,c),n=d(a.green(t),8,c),r=d(a.blue(t),8,c),o<<c+c|n<<c|r},g=function(t,r,n){var o;return null!=r&&null!=n||(o=t,t=x(o),r=w(o),n=b(o)),[d(t,c,8),d(r,c,8),d(n,c,8)]},x=function(t){return t>>c+c&h},w=function(t){return t>>c&h},b=function(t){return t&h},r.exports=u=function(){function t(t,r){var n,o,e,i,s,a,u,h,p,f,v,m,d,b;for(this.opts=r,this.hist=new Uint32Array(1<<3*c),this.pixels=new Uint32Array(t.length),s=a=0,v=t.length-1;v>=0?v>=a:a>=v;s=v>=0?++a:--a)this.pixels[s]=f=y(t[s]),this.hist[f]++;for(e=0,o=u=0,m=this.hist.length-1;m>=0?m>=u:u>=m;o=m>=0?++u:--u)this.hist[o]>0&&e++;for(this.colors=new Uint32Array(e),i=0,o=h=0,d=this.hist.length-1;d>=0?d>=h:h>=d;o=d>=0?++h:--h)this.hist[o]>0&&(this.colors[i++]=o);if(e<=this.opts.colorCount)for(this.quantizedColors=[],s=p=0,b=this.colors.length-1;b>=0?b>=p:p>=b;s=b>=0?++p:--p)n=this.colors[s],this.quantizedColors.push(new l(g(n),this.hist[n]));else this.quantizedColors=this.quantizePixels(this.opts.colorCount)}return t.prototype.getQuantizedColors=function(){return this.quantizedColors},t.prototype.quantizePixels=function(t){var r;return r=new PriorityQueue({comparator:f.comparator}),r.queue(new f(this.colors,this.hist,0,this.colors.length-1)),this.splitBoxes(r,t),this.generateAverageColors(r)},t.prototype.splitBoxes=function(t,r){for(var n;t.length<r;){if(n=t.dequeue(),null!=n?!n.canSplit():!0)return;t.queue(n.splitBox()),t.queue(n)}},t.prototype.generateAverageColors=function(t){var r;for(r=[];t.length>0;)r.push(t.dequeue().getAverageColor());return r},t}(),f=function(){function t(t,r,n,o){this.colors=t,this.hist=r,this.lowerIndex=n,this.upperIndex=o,this.fitBox()}return t.comparator=function(t,r){return t.getVolume()-r.getVolume()},t.prototype.getVolume=function(){return(this.maxRed-this.minRed+1)*(this.maxGreen-this.minGreen+1)*(this.maxBlue-this.minBlue+1)},t.prototype.canSplit=function(){return this.getColorCount()>1},t.prototype.getColorCount=function(){return 1+this.upperIndex-this.lowerIndex},t.prototype.fitBox=function(){var t,r,n,o,e,i,s,a,u;for(this.minRed=this.minGreen=this.minBlue=Number.MAX_VALUE,this.maxRed=this.maxGreen=this.maxBlue=Number.MIN_VALUE,this.population=0,n=0,e=i=a=this.lowerIndex,u=this.upperIndex;u>=a?u>=i:i>=u;e=u>=a?++i:--i)r=this.colors[e],n+=this.hist[r],s=x(r),o=w(r),t=b(r),s>this.maxRed&&(this.maxRed=s),s<this.minRed&&(this.minRed=s),o>this.maxGreen&&(this.maxGreen=o),o<this.minGreen&&(this.minGreen=o),t>this.maxBlue&&(this.maxRed=t),t<this.minBlue&&(this.minRed=t);return this.population=n},t.prototype.splitBox=function(){var r,n;if(!this.canSplit())throw new Error("Cannot split a box with only 1 color");return n=this.findSplitPoint(),r=new t(this.colors,this.hist,n+1,this.upperIndex),this.upperIndex=n,this.fitBox(),r},t.prototype.getLongestColorDimension=function(){var t,r,n;return n=this.maxRed-this.minRed,r=this.maxGreen-this.minGreen,t=this.maxBlue-this.minBlue,n>=r&&n>=t?s:r>=n&&r>=t?i:e},t.prototype.findSplitPoint=function(){var t,r,n,o,e,i,s;for(o=this.getLongestColorDimension(),m(this.colors,o,this.lowerIndex,this.upperIndex),C(this.colors,this.lowerIndex,this.upperIndex+1),m(this.colors,o,this.lowerIndex,this.upperIndex),e=this.population/2,t=0,r=n=i=this.lowerIndex,s=this.upperIndex;s>=i?s>=n:n>=s;r=s>=i?++n:--n)if(t+=this.hist[this.colors[r]],t>=e)return r;return this.lowerIndex},t.prototype.getAverageColor=function(){var t,r,n,o,e,i,s,a,u,h,c,p,f;for(h=i=r=0,f=0,s=a=c=this.lowerIndex,p=this.upperIndex;p>=c?p>=a:a>=p;s=p>=c?++a:--a)n=this.colors[s],o=this.hist[n],f+=o,h+=o*x(n),i+=o*w(n),r+=o*b(n);return u=Math.round(h/f),e=Math.round(i/f),t=Math.round(r/f),new l(g(u,e,t),f)},t}()},{"../../swatch":24}],18:[function(t,r,n){var o,e,i,s,a,u,h,c,p;c=p=t("../../util"),h=c.getColorIndex,s=c.SIGBITS,i=c.RSHIFT,a=t("../../swatch"),u=t("./vbox"),e=t("./pqueue"),r.exports=o=function(){function t(t){this.opts=p.defaults(t,this.constructor.DefaultOpts)}return t.DefaultOpts={maxIterations:1e3,fractByPopulations:.75},t.prototype.quantize=function(t,r){var n,o,i,s,h,c,p,l,f;if(0===t.length||r.colorCount<2||r.colorCount>256)throw new Error("Wrong MMCQ parameters");for(c=function(){return!1},Array.isArray(r.filters)&&r.filters.length>0&&(c=function(t,n,o,e){var i,s,a,u;for(u=r.filters,s=0,a=u.length;a>s;s++)if(i=u[s],!i(t,n,o,e))return!0;return!1}),f=u.build(t,c),i=f.hist,o=Object.keys(i).length,s=new e(function(t,r){return t.count()-r.count()}),s.push(f),this._splitBoxes(s,this.opts.fractByPopulations*r.colorCount),h=new e(function(t,r){return t.count()*t.volume()-r.count()*r.volume()}),h.contents=s.contents,this._splitBoxes(h,r.colorCount-h.size()),p=[],this.vboxes=[];h.size();)l=h.pop(),n=l.avg(),("function"==typeof c?c(n[0],n[1],n[2],255):void 0)||(this.vboxes.push(l),p.push(new a(n,l.count())));return p},t.prototype._splitBoxes=function(t,r){var n,o,e,i,s,a,u;for(n=1,o=0,e=this.opts.maxIterations;e>o;)if(o++,s=t.pop(),s.count()&&(i=s.split(),a=i[0],u=i[1],t.push(a),u&&(t.push(u),n++),n>=r||o>e))return},t}()},{"../../swatch":24,"../../util":25,"./pqueue":19,"./vbox":20}],19:[function(t,r,n){var o;r.exports=o=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype._sort=function(){
return this.contents.sort(this.comparator),this.sorted=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return this.sorted||this._sort(),null==t&&(t=this.contents.length-1),this.contents[t]},t.prototype.pop=function(){return this.sorted||this._sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.sorted||this._sort(),this.contents.map(t)},t}()},{}],20:[function(t,r,n){var o,e,i,s,a,u;a=u=t("../../util"),s=a.getColorIndex,e=a.SIGBITS,o=a.RSHIFT,r.exports=i=function(){function t(t,r,n,o,e,i,s){this.r1=t,this.r2=r,this.g1=n,this.g2=o,this.b1=e,this.b2=i,this.hist=s}return t.build=function(r,n){var i,a,u,h,c,p,l,f,g,v,m,d,y,b,w,x;for(g=1<<3*e,f=new Uint32Array(g),w=p=u=0,x=l=h=Number.MAX_VALUE,d=r.length/4,v=0;d>v;)y=4*v,v++,b=r[y+0],c=r[y+1],a=r[y+2],i=r[y+3],n(b,c,a,i)||(b>>=o,c>>=o,a>>=o,m=s(b,c,a),f[m]+=1,b>w&&(w=b),x>b&&(x=b),c>p&&(p=c),l>c&&(l=c),a>u&&(u=a),h>a&&(h=a));return new t(x,w,l,p,h,u,f)},t.prototype.invalidate=function(){return delete this._count,delete this._avg,delete this._volume},t.prototype.volume=function(){return null==this._volume&&(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(){var t,r;if(null==this._count){r=this.hist,t=0;for(var n=this.r1;n<=this.r2;n++)for(var o=this.g1;o<=this.g2;o++)for(var e=this.b1;e<=this.b2;e++){var i=s(n,o,e);t+=r[i]}this._count=t}return this._count},t.prototype.clone=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.hist)},t.prototype.avg=function(){var t,r,n,o,i,a;if(null==this._avg){n=this.hist,i=0,o=1<<8-e,a=r=t=0;for(var u=this.r1;u<=this.r2;u++)for(var h=this.g1;h<=this.g2;h++)for(var c=this.b1;c<=this.b2;c++){var p=s(u,h,c),l=n[p];i+=l,a+=l*(u+.5)*o,r+=l*(h+.5)*o,t+=l*(c+.5)*o}i?this._avg=[~~(a/i),~~(r/i),~~(t/i)]:this._avg=[~~(o*(this.r1+this.r2+1)/2),~~(o*(this.g1+this.g2+1)/2),~~(o*(this.b1+this.b2+1)/2)]}return this._avg},t.prototype.split=function(){var t,r,n,o,e,i,a,u,h,c,p,l,f,g,v,m,d;if(i=this.hist,!this.count())return null;if(1===this.count())return[this.clone()];switch(f=this.r2-this.r1+1,e=this.g2-this.g1+1,r=this.b2-this.b1+1,c=Math.max(f,e,r),t=null,v=m=0,h=null,c){case f:h="r",t=new Uint32Array(this.r2+1);for(var y=this.r1;y<=this.r2;y++){v=0;for(var b=this.g1;b<=this.g2;b++)for(var w=this.b1;w<=this.b2;w++){var x=s(y,b,w);v+=i[x]}m+=v,t[y]=m}break;case e:h="g",t=new Uint32Array(this.g2+1);for(var b=this.g1;b<=this.g2;b++){v=0;for(var y=this.r1;y<=this.r2;y++)for(var w=this.b1;w<=this.b2;w++){var x=s(y,b,w);v+=i[x]}m+=v,t[b]=m}break;case r:h="b",t=new Uint32Array(this.b2+1);for(var w=this.b1;w<=this.b2;w++){v=0;for(var y=this.r1;y<=this.r2;y++)for(var b=this.g1;b<=this.g2;b++){var x=s(y,b,w);v+=i[x]}m+=v,t[w]=m}}for(g=-1,l=new Uint32Array(t.length),a=u=0,p=t.length-1;p>=0?p>=u:u>=p;a=p>=0?++u:--u)n=t[a],0>g&&n>m/2&&(g=a),l[a]=m-n;return d=this,(o=function(r){var n,o,e,i,s,a,u,h,c;for(i=r+"1",s=r+"2",o=d[i],e=d[s],h=d.clone(),c=d.clone(),a=g-o,u=e-g,u>=a?(e=Math.min(e-1,~~(g+u/2)),e=Math.max(0,e)):(e=Math.max(o,~~(g-1-a/2)),e=Math.min(d[s],e));!t[e];)e++;for(n=l[e];!n&&t[e-1];)n=l[--e];return h[s]=e,c[i]=e+1,[h,c]})(h)},t.prototype.contains=function(t){var r,n,e;return e=t[0]>>o,n=t[1]>>o,r=t[2]>>o,e>=this.r1&&e<=this.r2&&n>=this.g1&&n<=this.g2&&r>=this.b1&&r<=this.b2},t}()},{"../../util":25}],21:[function(t,r,n){var o;r.exports=o=function(){function t(){}return t.prototype.initialize=function(t,r){},t.prototype.getQuantizedColors=function(){},t}(),r.exports.Baseline=t("./baseline"),r.exports.NoCopy=t("./nocopy"),r.exports.ColorCut=t("./color-cut"),r.exports.MMCQ=t("./mmcq")},{"./baseline":15,"./color-cut":16,"./mmcq":22,"./nocopy":23}],22:[function(t,r,n){var o,e,i,s,a=function(t,r){function n(){this.constructor=t}for(var o in r)u.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},u={}.hasOwnProperty;s=t("../swatch"),i=t("./index"),e=t("./impl/mmcq"),r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.initialize=function(t,r){var n;return this.opts=r,n=new e,this.swatches=n.quantize(t,this.opts)},r.prototype.getQuantizedColors=function(){return this.swatches},r}(i)},{"../swatch":24,"./impl/mmcq":18,"./index":21}],23:[function(t,r,n){var o,e,i,s,a=function(t,r){function n(){this.constructor=t}for(var o in r)u.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},u={}.hasOwnProperty;i=t("../swatch"),e=t("./index"),s=t("../../vendor-mod/quantize"),r.exports=o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.initialize=function(t,r){var n;return this.opts=r,n=s(t,this.opts),this.swatches=n.vboxes.map(function(t){return function(t){return new i(t.color,t.vbox.count())}}(this))},r.prototype.getQuantizedColors=function(){return this.swatches},r}(e)},{"../../vendor-mod/quantize":27,"../swatch":24,"./index":21}],24:[function(t,r,n){var o,e,i,s,a;a=t("./util"),o=a.Color,i=3,e=4.5,r.exports=s=function(){function t(t,r){this.rgb=t,this.population=r}return t.prototype.hsl=void 0,t.prototype.rgb=void 0,t.prototype.population=1,t.prototype.yiq=0,t.prototype.getHsl=function(){return this.hsl?this.hsl:this.hsl=a.rgbToHsl(this.rgb[0],this.rgb[1],this.rgb[2])},t.prototype.getPopulation=function(){return this.population},t.prototype.getRgb=function(){return this.rgb},t.prototype.getHex=function(){return a.rgbToHex(this.rgb[0],this.rgb[1],this.rgb[2])},t.prototype.getTitleTextColor=function(){return this._ensureTextColors(),this.titleTextColor},t.prototype.getBodyTextColor=function(){return this._ensureTextColors(),this.bodyTextColor},t.prototype._ensureTextColors=function(){var t,r,n,s,u;return this.generatedTextColors?void 0:(t=[255,this.rgb[0],this.rgb[0],this.rgb[0]],s=a.calculateMinimumAlpha(o.WHITE,t,e),u=a.calculateMinimumAlpha(o.WHITE,t,i),-1!==s&&-1!==u?(this.bodyTextColor=a.setAlphaComponent(o.WHITE,s),this.titleTextColor=a.setAlphaComponent(o.WHITE,u),void(this.generatedTextColors=!0)):(r=a.calculateMinimumAlpha(o.BLACK,t,e),n=a.calculateMinimumAlpha(o.BLACK,t,i),-1!==r&&-1!==r?(this.bodyTextColor=a.setAlphaComponent(o.BLACK,r),this.titleTextColor=a.setAlphaComponent(o.BLACK,n),void(this.generatedTextColors=!0)):(console.log,console.log,console.log("@bodyTextColor"),console.log(this.bodyTextColor),console.log,console.log("@titleTextColor"),console.log(this.titleTextColor),console.log,console.log,this.bodyTextColor=-1!==s?a.setAlphaComponent(o.WHITE,s):a.setAlphaComponent(o.BLACK,r),this.titleTextColor=-1!==u?a.setAlphaComponent(o.WHITE,u):a.setAlphaComponent(o.BLACK,n),this.generatedTextColors=!0)))},t}()},{"./util":25}],25:[function(t,r,n){var o,e,i,s,a,u;e={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},u=5,a=8-u,i=10,s=10,o={WHITE:[255,255,255,255],BLACK:[255,0,0,0],alpha:function(t){return t[0]},red:function(t){return t[1]},green:function(t){return t[2]},blue:function(t){return t[3]},argb:function(t,r,n,o){return[t,r,n,o]}},r.exports={clone:function(t){var r,n,o;if("object"==typeof t){if(Array.isArray(t))return t.map(function(t){return function(r){return t.clone(r)}}(this));r={};for(n in t)o=t[n],r[n]=this.clone(o);return r}return t},defaults:function(){var t,r,n,o,e,i;for(e={},r=0,o=arguments.length;o>r;r++){t=arguments[r];for(n in t)i=t[n],null==e[n]&&(e[n]=this.clone(i))}return e},hexToRgb:function(t){var r;return r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),null!=r?[r[1],r[2],r[3]].map(function(t){return parseInt(t,16)}):null},rgbToHex:function(t,r,n){return"#"+((1<<24)+(t<<16)+(r<<8)+n).toString(16).slice(1,7)},rgbToHsl:function(t,r,n){var o,e,i,s,a,u;if(t/=255,r/=255,n/=255,s=Math.max(t,r,n),a=Math.min(t,r,n),e=void 0,u=void 0,i=(s+a)/2,s===a)e=u=0;else{switch(o=s-a,u=i>.5?o/(2-s-a):o/(s+a),s){case t:e=(r-n)/o+(n>r?6:0);break;case r:e=(n-t)/o+2;break;case n:e=(t-r)/o+4}e/=6}return[e,u,i]},hslToRgb:function(t,r,n){var o,e,i,s,a,u;return u=void 0,e=void 0,o=void 0,i=function(t,r,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(r-t)*n:.5>n?r:2/3>n?t+(r-t)*(2/3-n)*6:t},0===r?u=e=o=n:(a=.5>n?n*(1+r):n+r-n*r,s=2*n-a,u=i(s,a,t+1/3),e=i(s,a,t),o=i(s,a,t-1/3)),[255*u,255*e,255*o]},rgbToXyz:function(t,r,n){var o,e,i;return t/=255,r/=255,n/=255,t=t>.04045?Math.pow((t+.005)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.005)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.005)/1.055,2.4):n/12.92,t*=100,r*=100,n*=100,o=.4124*t+.3576*r+.1805*n,e=.2126*t+.7152*r+.0722*n,i=.0193*t+.1192*r+.9505*n,[o,e,i]},xyzToCIELab:function(t,r,n){var o,e,i,s,a,u;return e=95.047,i=100,s=108.883,t/=e,r/=i,n/=s,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=116*r-16,a=500*(t-r),u=200*(r-n),[o,a,u]},rgbToCIELab:function(t,r,n){var o,e,i,s;return o=this.rgbToXyz(t,r,n),e=o[0],i=o[1],s=o[2],this.xyzToCIELab(e,i,s)},deltaE94:function(t,r){var n,o,e,i,s,a,u,h,c,p,l,f,g,v,m,d,y,b,w,x;return s=1,e=1,i=1,n=t[0],a=t[1],h=t[2],o=r[0],u=r[1],c=r[2],p=n-o,l=a-u,f=h-c,g=Math.sqrt(a*a+h*h),v=Math.sqrt(u*u+c*c),b=o-n,m=v-g,d=Math.sqrt(p*p+l*l+f*f),y=Math.sqrt(d)>Math.sqrt(Math.abs(b))+Math.sqrt(Math.abs(m))?Math.sqrt(d*d-b*b-m*m):0,w=1+.045*g,x=1+.015*g,b/=s,m/=e*w,y/=i*x,Math.sqrt(b*b+m*m+y*y)},rgbDiff:function(t,r){var n,o;return n=this.rgbToCIELab.apply(this,t),o=this.rgbToCIELab.apply(this,r),this.deltaE94(n,o)},hexDiff:function(t,r){var n,o;return n=this.hexToRgb(t),o=this.hexToRgb(r),this.rgbDiff(n,o)},DELTAE94_DIFF_STATUS:e,getColorDiffStatus:function(t){return t<e.NA?"N/A":t<=e.PERFECT?"Perfect":t<=e.CLOSE?"Close":t<=e.GOOD?"Good":t<e.SIMILAR?"Similar":"Wrong"},SIGBITS:u,RSHIFT:a,getColorIndex:function(t,r,n){return(t<<2*u)+(r<<u)+n},Color:o,calculateMinimumAlpha:function(t,r,n){var e,a,u,h,c,p;if(255!==o.alpha(r))throw new Error("background can not be translucent");if(c=this.setAlphaComponent(t,255),p=this.calculateContrast(c,r),n>p)return-1;for(u=0,a=0,e=255;i>=u&&e-a>s;)h=Math.floor((a+e)/2),c=this.setAlphaComponent(t,h),p=this.calculateContrast(c,r),n>p?a=h:e=h,u+=1;return e},setAlphaComponent:function(t,r){return[r,t[1],t[2],t[3]]},calculateContrast:function(t,r){var n,e;if(255!==o.alpha(r))throw new Error("background can not be translucent");return o.alpha(t)<255&&(t=this.compositeColors(t,r)),n=this.calculateLuminance(t)+.05,e=this.calculateLuminance(r)+.05,Math.max(n,e)/Math.min(n,e)},calculateLuminance:function(t){var r,n,e;return e=o.red(t)/255,e=.03928>e?e/12.92:Math.pow((e+.055)/1.055,2.4),n=o.green(t)/255,n=.03928>n?n/12.92:Math.pow((n+.055)/1.055,2.4),r=o.blue(t)/255,r=.03928>r?r/12.92:Math.pow((r+.055)/1.055,2.4),.2126*e+.7152*n+.0722*r},compositeColors:function(t,r){var n,e,i,s,a,u;return e=o.alpha(t)/255,i=o.alpha(r)/255,n=(e+i)*(1-e),u=o.red(t)*e+o.red(r)*i*(1-e),a=o.green(t)*e+o.green(r)*i*(1-e),s=o.blue(t)*e+o.blue(r)*i*(1-e),o.argb(n,u,a,s)}}},{}],26:[function(t,r,n){var o,e,i,s,a,u,h=function(t,r){return function(){return t.apply(r,arguments)}};s=t("./swatch"),u=t("./util"),e=t("./generator").Default,i=t("./filter"),r.exports=a=function(){function r(t,r){this.sourceImage=t,null==r&&(r={}),this.swatches=h(this.swatches,this),this.opts=u.defaults(r,this.constructor.DefaultOpts),this.generator=this.opts.generator}return r.DefaultOpts={colorCount:64,quality:5,generator:new e,Image:null,Quantizer:t("./quantizer").MMCQ,filters:[]},r.from=function(t){return new o(t)},r.prototype.quantize=t("quantize"),r.prototype._swatches=[],r.prototype.getPalette=function(t){var r;return r=new this.opts.Image(this.sourceImage,function(r){return function(n,o){var e,i;if(null!=n)return t(n);try{return r._process(o,r.opts),t(null,r.swatches())}catch(i){return e=i,t(e)}}}(this))},r.prototype.getSwatches=function(t){return this.getPalette(t)},r.prototype._process=function(t,r){var n,o,e;return t.scaleDown(this.opts),n=t.getImageData(),o=new this.opts.Quantizer,o.initialize(n.data,this.opts),e=o.getQuantizedColors(),this.generator.generate(e),t.removeCanvas()},r.prototype.swatches=function(){return{Vibrant:this.generator.getVibrantSwatch(),Muted:this.generator.getMutedSwatch(),DarkVibrant:this.generator.getDarkVibrantSwatch(),DarkMuted:this.generator.getDarkMutedSwatch(),LightVibrant:this.generator.getLightVibrantSwatch(),LightMuted:this.generator.getLightMutedSwatch()}},r}(),r.exports.Builder=o=function(){function t(t,r){this.src=t,this.opts=null!=r?r:{},this.opts.filters=u.clone(a.DefaultOpts.filters)}return t.prototype.maxColorCount=function(t){return this.opts.colorCount=t,this},t.prototype.maxDimension=function(t){return this.opts.maxDimension=t,this},t.prototype.addFilter=function(t){return"function"==typeof t&&this.opts.filters.push(t),this},t.prototype.removeFilter=function(t){var r;return(r=this.opts.filters.indexOf(t))>0&&this.opts.filters.splice(r),this},t.prototype.clearFilters=function(){return this.opts.filters=[],this},t.prototype.quality=function(t){return this.opts.quality=t,this},t.prototype.useImage=function(t){return this.opts.Image=t,this},t.prototype.useGenerator=function(t){return this.opts.generator=t,this},t.prototype.useQuantizer=function(t){return this.opts.Quantizer=t,this},t.prototype.build=function(){return null==this.v&&(this.v=new a(this.src,this.opts)),this.v},t.prototype.getSwatches=function(t){return this.build().getPalette(t)},t.prototype.getPalette=function(t){return this.build().getPalette(t)},t.prototype.from=function(t){return new a(t,this.opts)},t}(),r.exports.Util=u,r.exports.Swatch=s,r.exports.Quantizer=t("./quantizer/"),r.exports.Generator=t("./generator/"),r.exports.Filter=t("./filter/")},{"./filter":10,"./filter/":10,"./generator":12,"./generator/":12,"./quantizer":21,"./quantizer/":21,"./swatch":24,"./util":25,quantize:6}],27:[function(t,n,o){if(!e)var e={map:function(t,r){var n={};return r?t.map(function(t,o){return n.index=o,r.call(n,t)}):t.slice()},naturalOrder:function(t,r){return t-r},sum:function(t,r){var n={};return t.reduce(r?function(t,o,e){return n.index=e,t+r.call(n,o)}:function(t,r){return t+r},0)},max:function(t,r){return Math.max.apply(null,r?e.map(t,r):t)}};var i=function(){function t(t,r,n){return(t<<2*c)+(r<<c)+n}function n(t){function r(){n.sort(t),o=!0}var n=[],o=!1;return{push:function(t){n.push(t),o=!1},peek:function(t){return o||r(),void 0===t&&(t=n.length-1),n[t]},pop:function(){return o||r(),n.pop()},size:function(){return n.length},map:function(t){return n.map(t)},debug:function(){return o||r(),n}}}function o(t,r,n,o,e,i,s){var a=this;a.r1=t,a.r2=r,a.g1=n,a.g2=o,a.b1=e,a.b2=i,a.histo=s}function i(){this.vboxes=new n(function(t,r){return e.naturalOrder(t.vbox.count()*t.vbox.volume(),r.vbox.count()*r.vbox.volume())})}function s(n,e){var i,s,u,h,l=1<<3*c,f=new Uint32Array(l),v=1e6,m=0,d=1e6,y=0,w=1e6,x=0,C=n.length/4,M=0;if("function"==typeof e)for(;C>M;)offset=4*M,M++,r=n[offset+0],g=n[offset+1],b=n[offset+2],a=n[offset+3],e(r,g,b,a)||(s=r>>p,u=g>>p,h=b>>p,i=t(s,u,h),f[i]++,v>s?v=s:s>m&&(m=s),d>u?d=u:u>y&&(y=u),w>h?w=h:h>x&&(x=h));else for(;C>M;)offset=4*M,M++,r=n[offset+0],g=n[offset+1],b=n[offset+2],a=n[offset+3],s=r>>p,u=g>>p,h=b>>p,i=t(s,u,h),f[i]++,v>s?v=s:s>m&&(m=s),d>u?d=u:u>y&&(y=u),w>h?w=h:h>x&&(x=h);return{histo:f,vbox:new o(v,m,d,y,w,x,f)}}function u(r,n){function o(t){var r,o,e,i,s,a=t+"1",u=t+"2",p=0,l=y;for(e=n.copy(),i=n.copy(),r=l-n[a],o=n[u]-l,o>=r?(s=Math.min(n[u]-1,~~(l+o/2)),s=Math.max(0,s)):(s=Math.max(n[a],~~(l-1-r/2)),s=Math.min(n[u],s));!h[s];)s++;for(p=c[s];!p&&h[s-1];)p=c[--s];return e[u]=s,i[a]=e[u]+1,[e,i]}if(n.count()){var i=n.r2-n.r1+1,s=n.g2-n.g1+1,a=n.b2-n.b1+1,u=e.max([i,s,a]);if(1==n.count())return[n.copy()];var h,c,p,l,f,g,v,m=0,d="b";if(u==i)for(d="r",h=new Uint32Array(n.r2+1),p=n.r1;p<=n.r2;p++){for(g=0,l=n.g1;l<=n.g2;l++)for(f=n.b1;f<=n.b2;f++)v=t(p,l,f),g+=r[v];m+=g,h[p]=m}else if(u==s)for(d="g",h=new Uint32Array(n.g2+1),p=n.g1;p<=n.g2;p++){for(g=0,l=n.r1;l<=n.r2;l++)for(f=n.b1;f<=n.b2;f++)v=t(l,p,f),g+=r[v];m+=g,h[p]=m}else for(h=new Uint32Array(n.b2+1),p=n.b1;p<=n.b2;p++){for(g=0,l=n.r1;l<=n.r2;l++)for(f=n.g1;f<=n.g2;f++)v=t(l,f,p),g+=r[v];m+=g,h[p]=m}var y=-1;for(c=new Uint32Array(h.length),p=0;p<h.length;p++){var b=h[p];0>y&&b>m/2&&(y=p),c[p]=m-b}return o(d)}}function h(t,r){function o(t,n,o,e){for(var i=0;i<r.filters.length;i++){var s=r.filters[i];if(!s(t,n,o,e))return!0}return!1}function a(t,r){for(var n,o=1,e=0;l>e;)if(n=t.pop(),n.count()){var i=u(g,n),s=i[0],a=i[1];if(!s)return;if(t.push(s),a&&(t.push(a),o++),o>=r)return;if(e++>l)return}else e++}var h=r.colorCount;if(!t.length||2>h||h>256)return!1;var c=Array.isArray(r.filters)&&r.filters.length>0,p=s(t,c?houldIgnore:null),g=p.histo,v=(Object.keys(g).length,p.vbox),m=new n(function(t,r){return e.naturalOrder(t.count(),r.count())});m.push(v),a(m,f*h);for(var d=new n(function(t,r){return e.naturalOrder(t.count()*t.volume(),r.count()*r.volume())});m.size();)d.push(m.pop());a(d,h-d.size());for(var y=new i;d.size();){var b=d.pop(),w=v.avg();c&&o(w[0],w[1],w[2],255)||y.push(b)}return y}var c=5,p=8-c,l=1e3,f=.75;return o.prototype={volume:function(t){var r=this;return r._volume&&!t||(r._volume=(r.r2-r.r1+1)*(r.g2-r.g1+1)*(r.b2-r.b1+1)),r._volume},count:function(r){var n=this,o=n.histo;if(!n._count_set||r){var e,i,s,a=0;for(e=n.r1;e<=n.r2;e++)for(i=n.g1;i<=n.g2;i++)for(s=n.b1;s<=n.b2;s++)index=t(e,i,s),a+=o[index];n._count=a,n._count_set=!0}return n._count},copy:function(){var t=this;return new o(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(r){var n=this,o=n.histo;if(!n._avg||r){var e,i,s,a,u,h=0,p=1<<8-c,l=0,f=0,g=0;for(i=n.r1;i<=n.r2;i++)for(s=n.g1;s<=n.g2;s++)for(a=n.b1;a<=n.b2;a++)u=t(i,s,a),e=o[u],h+=e,l+=e*(i+.5)*p,f+=e*(s+.5)*p,g+=e*(a+.5)*p;h?n._avg=[~~(l/h),~~(f/h),~~(g/h)]:n._avg=[~~(p*(n.r1+n.r2+1)/2),~~(p*(n.g1+n.g2+1)/2),~~(p*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(t){var r=this,n=t[0]>>p;return gval=t[1]>>p,bval=t[2]>>p,n>=r.r1&&n<=r.r2&&gval>=r.g1&&gval<=r.g2&&bval>=r.b1&&bval<=r.b2}},i.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var r=this.vboxes,n=0;n<r.size();n++)if(r.peek(n).vbox.contains(t))return r.peek(n).color;return this.nearest(t)},nearest:function(t){for(var r,n,o,e=this.vboxes,i=0;i<e.size();i++)n=Math.sqrt(Math.pow(t[0]-e.peek(i).color[0],2)+Math.pow(t[1]-e.peek(i).color[1],2)+Math.pow(t[2]-e.peek(i).color[2],2)),(r>n||void 0===r)&&(r=n,o=e.peek(i).color);return o},forcebw:function(){var t=this.vboxes;t.sort(function(t,r){return e.naturalOrder(e.sum(t.color),e.sum(r.color))});var r=t[0].color;r[0]<5&&r[1]<5&&r[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,o=t[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(t[n].color=[255,255,255])}},{quantize:h,getAll:s,medianCutApply:u}}();n.exports=i.quantize,n.exports.getAll=i.getAll,n.exports.splitBox=i.medianCutApply},{}]},{},[8]);